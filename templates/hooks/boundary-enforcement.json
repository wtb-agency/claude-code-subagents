{
  "hooks": [
    {
      "name": "Enforce Agent Boundaries",
      "description": "Prevent agents from editing files outside their ownership boundaries",
      "events": ["PreToolUse"],
      "matchTool": "Edit",
      "command": [
        "bash", "-c",
        "# Get file being edited from tool input\nFILE_PATH=$(echo \"$CLAUDE_HOOK_INPUT\" | jq -r '.file_path // empty')\n\nif [ -z \"$FILE_PATH\" ]; then\n  echo 'No file path found in Edit tool'\n  exit 0\nfi\n\n# Protect critical system files that should only be modified via slash commands\ncase \"$FILE_PATH\" in\n  \".claude/project-state.json\")\n    echo \"{\\\"permissionDecision\\\": \\\"ask\\\", \\\"message\\\": \\\"State file modification detected. Use /wtb:update-state command instead.\\\"}\"\n    exit 0\n    ;;\n  \".claude/slash-commands/\"*)\n    echo \"{\\\"permissionDecision\\\": \\\"ask\\\", \\\"message\\\": \\\"Slash command modification detected. Are you sure you want to modify orchestration commands?\\\"}\"\n    exit 0\n    ;;\n  \".claude/hooks/\"*)\n    echo \"{\\\"permissionDecision\\\": \\\"ask\\\", \\\"message\\\": \\\"Hook configuration modification detected. Are you sure you want to modify workflow automation?\\\"}\"\n    exit 0\n    ;;\n  \"agents-rules/\"*)\n    echo \"{\\\"permissionDecision\\\": \\\"ask\\\", \\\"message\\\": \\\"Agent rules modification detected. This affects agent behavior boundaries.\\\"}\"\n    exit 0\n    ;;\n  \"AGENTS.md\")\n    echo \"{\\\"permissionDecision\\\": \\\"ask\\\", \\\"message\\\": \\\"Coordination framework modification detected. This affects agent orchestration rules.\\\"}\"\n    exit 0\n    ;;\nesac\n\n# For subagent work, we rely on clear agent dispatch and human oversight\n# The main protection is around critical system files, not per-agent boundaries\n# This is more reliable in the user-initiated command architecture\n\n# Allow most operations - boundary enforcement is now primarily about protecting system files\necho '{\"permissionDecision\": \"allow\"}'"
      ]
    }
  ]
}
